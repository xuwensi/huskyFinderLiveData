{"ast":null,"code":"'use strict';\n\nvar http = module.exports;\n\nhttp.request = function (opts) {\n  opts.cors = true;\n  return window.fetch(opts.url, opts).then(function (resp) {\n    var headers = {};\n    var result = {\n      statusCode: resp.status,\n      headers: headers,\n      toJSON: function () {\n        return this;\n      }\n    };\n    Array.from(resp.headers.entries()).forEach(function (h) {\n      headers[h[0]] = h[1];\n    });\n\n    if (!headers['content-type']) {\n      return result;\n    }\n\n    if (/json/.test(headers['content-type'])) {\n      return resp.json().then(function (json) {\n        result.body = json;\n        return result;\n      });\n    }\n\n    return resp.text().then(function (txt) {\n      result.body = txt;\n      return result;\n    });\n  });\n};","map":{"version":3,"sources":["C:/Users/xuwen/Desktop/INFO340/project-2-xuwensi/node_modules/@root/acme/lib/browser/http.js"],"names":["http","module","exports","request","opts","cors","window","fetch","url","then","resp","headers","result","statusCode","status","toJSON","Array","from","entries","forEach","h","test","json","body","text","txt"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,GAAGC,MAAM,CAACC,OAAlB;;AAEAF,IAAI,CAACG,OAAL,GAAe,UAASC,IAAT,EAAe;AAC7BA,EAAAA,IAAI,CAACC,IAAL,GAAY,IAAZ;AACA,SAAOC,MAAM,CAACC,KAAP,CAAaH,IAAI,CAACI,GAAlB,EAAuBJ,IAAvB,EAA6BK,IAA7B,CAAkC,UAASC,IAAT,EAAe;AACvD,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,MAAM,GAAG;AACZC,MAAAA,UAAU,EAAEH,IAAI,CAACI,MADL;AAEZH,MAAAA,OAAO,EAAEA,OAFG;AAGZI,MAAAA,MAAM,EAAE,YAAW;AAClB,eAAO,IAAP;AACA;AALW,KAAb;AAOAC,IAAAA,KAAK,CAACC,IAAN,CAAWP,IAAI,CAACC,OAAL,CAAaO,OAAb,EAAX,EAAmCC,OAAnC,CAA2C,UAASC,CAAT,EAAY;AACtDT,MAAAA,OAAO,CAACS,CAAC,CAAC,CAAD,CAAF,CAAP,GAAgBA,CAAC,CAAC,CAAD,CAAjB;AACA,KAFD;;AAGA,QAAI,CAACT,OAAO,CAAC,cAAD,CAAZ,EAA8B;AAC7B,aAAOC,MAAP;AACA;;AACD,QAAI,OAAOS,IAAP,CAAYV,OAAO,CAAC,cAAD,CAAnB,CAAJ,EAA0C;AACzC,aAAOD,IAAI,CAACY,IAAL,GAAYb,IAAZ,CAAiB,UAASa,IAAT,EAAe;AACtCV,QAAAA,MAAM,CAACW,IAAP,GAAcD,IAAd;AACA,eAAOV,MAAP;AACA,OAHM,CAAP;AAIA;;AACD,WAAOF,IAAI,CAACc,IAAL,GAAYf,IAAZ,CAAiB,UAASgB,GAAT,EAAc;AACrCb,MAAAA,MAAM,CAACW,IAAP,GAAcE,GAAd;AACA,aAAOb,MAAP;AACA,KAHM,CAAP;AAIA,GAzBM,CAAP;AA0BA,CA5BD","sourcesContent":["'use strict';\n\nvar http = module.exports;\n\nhttp.request = function(opts) {\n\topts.cors = true;\n\treturn window.fetch(opts.url, opts).then(function(resp) {\n\t\tvar headers = {};\n\t\tvar result = {\n\t\t\tstatusCode: resp.status,\n\t\t\theaders: headers,\n\t\t\ttoJSON: function() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t\tArray.from(resp.headers.entries()).forEach(function(h) {\n\t\t\theaders[h[0]] = h[1];\n\t\t});\n\t\tif (!headers['content-type']) {\n\t\t\treturn result;\n\t\t}\n\t\tif (/json/.test(headers['content-type'])) {\n\t\t\treturn resp.json().then(function(json) {\n\t\t\t\tresult.body = json;\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\t\treturn resp.text().then(function(txt) {\n\t\t\tresult.body = txt;\n\t\t\treturn result;\n\t\t});\n\t});\n};\n"]},"metadata":{},"sourceType":"script"}